generator client {
  provider = "prisma-client-js"
  output   = "./@prisma/client/index.js"
}

datasource db {
  provider = "postgresql"
}

model product {
  id          BigInt            @id @default(autoincrement())
  name        String
  description String?
  price       Int
  tags        String[]          @default([])
  created_at  DateTime          @default(now()) @db.Timestamptz(6)
  updated_at  DateTime?         @updatedAt @db.Timestamptz(6)
  image_id    BigInt?           @unique
  image       product_image?    @relation(fields: [image_id], references: [id], onDelete: Cascade)
  comments    product_comment[]
}

model product_comment {
  id         BigInt    @id @default(autoincrement())
  content    String
  created_at DateTime  @default(now()) @db.Timestamptz(6)
  updated_at DateTime? @updatedAt @db.Timestamptz(6)
  product_id BigInt
  product    product   @relation(fields: [product_id], references: [id], onDelete: Cascade)
}

model product_image {
  id         BigInt   @id @default(autoincrement())
  name       String   @unique
  path       String
  size       Int
  created_at DateTime @default(now()) @db.Timestamptz(6)
  product    product?
}

model article {
  id         BigInt            @id @default(autoincrement())
  title      String
  content    String
  created_at DateTime          @default(now()) @db.Timestamptz(6)
  updated_at DateTime?         @updatedAt @db.Timestamptz(6)
  comments   article_comment[]
}

model article_comment {
  id         BigInt    @id @default(autoincrement())
  content    String
  created_at DateTime  @default(now()) @db.Timestamptz(6)
  updated_at DateTime? @updatedAt @db.Timestamptz(6)
  article_id BigInt
  article    article   @relation(fields: [article_id], references: [id], onDelete: Cascade)
}
